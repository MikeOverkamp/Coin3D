Just a new SoSFVec2s field.  Useful for two-dimensional integer vectors
with relatively small size (short type).

  Lars J

Index: include/Inventor/fields/SoSFVec2s.h
===================================================================
RCS file: include/Inventor/fields/SoSFVec2s.h
diff -N include/Inventor/fields/SoSFVec2s.h
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ include/Inventor/fields/SoSFVec2s.h	25 Jan 2002 09:57:16 -0000
@@ -0,0 +1,43 @@
+#ifndef COIN_SOSFVEC2S_H
+#define COIN_SOSFVEC2S_H
+
+/**************************************************************************\
+ *
+ *  This file is part of the Coin 3D visualization library.
+ *  Copyright (C) 1998-2001 by Systems in Motion.  All rights reserved.
+ *  
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU General Public License
+ *  version 2 as published by the Free Software Foundation.  See the
+ *  file LICENSE.GPL at the root directory of this source distribution
+ *  for more details.
+ *
+ *  If you desire to use Coin with software that is incompatible
+ *  licensewise with the GPL, and / or you would like to take
+ *  advantage of the additional benefits with regard to our support
+ *  services, please contact Systems in Motion about acquiring a Coin
+ *  Professional Edition License.  See <URL:http://www.coin3d.org> for
+ *  more information.
+ *
+ *  Systems in Motion, Prof Brochs gate 6, 7030 Trondheim, NORWAY
+ *  <URL:http://www.sim.no>, <mailto:support@sim.no>
+ *
+\**************************************************************************/
+
+#include <Inventor/fields/SoSField.h>
+#include <Inventor/fields/SoSubField.h>
+#include <Inventor/SbVec2s.h>
+
+class COIN_DLL_API SoSFVec2s : public SoSField {
+  typedef SoSField inherited;
+
+  SO_SFIELD_HEADER(SoSFVec2s, SbVec2s, const SbVec2s &);
+
+public:
+  static void initClass(void);
+
+  void setValue(const short x, const short y);
+  void setValue(const short xy[2]);
+};
+
+#endif // !COIN_SOSFVEC2S_H
Index: src/fields/Makefile.am
===================================================================
RCS file: /export/cvsroot/Coin/src/fields/Makefile.am,v
retrieving revision 1.34
diff -u -r1.34 Makefile.am
--- src/fields/Makefile.am	17 Jan 2002 14:55:54 -0000	1.34
+++ src/fields/Makefile.am	25 Jan 2002 09:57:16 -0000
@@ -49,6 +49,7 @@
 	SoSFTrigger.cpp \
 	SoSFUInt32.cpp \
 	SoSFUShort.cpp \
+	SoSFVec2s.cpp \
 	SoSFVec2f.cpp \
 	SoSFVec3d.cpp \
 	SoSFVec3f.cpp \
@@ -111,6 +112,7 @@
 	../../include/Inventor/fields/SoSFUInt32.h \
 	../../include/Inventor/fields/SoSFULong.h \
 	../../include/Inventor/fields/SoSFUShort.h \
+	../../include/Inventor/fields/SoSFVec2s.h \
 	../../include/Inventor/fields/SoSFVec2f.h \
 	../../include/Inventor/fields/SoSFVec3f.h \
 	../../include/Inventor/fields/SoSFVec3d.h \
Index: src/fields/Makefile.in
===================================================================
RCS file: /export/cvsroot/Coin/src/fields/Makefile.in,v
retrieving revision 1.77
diff -u -r1.77 Makefile.in
--- src/fields/Makefile.in	17 Jan 2002 14:55:54 -0000	1.77
+++ src/fields/Makefile.in	25 Jan 2002 09:57:16 -0000
@@ -174,6 +174,7 @@
 	SoSFTrigger.cpp \
 	SoSFUInt32.cpp \
 	SoSFUShort.cpp \
+	SoSFVec2s.cpp \
 	SoSFVec2f.cpp \
 	SoSFVec3d.cpp \
 	SoSFVec3f.cpp \
@@ -238,6 +239,7 @@
 	../../include/Inventor/fields/SoSFUInt32.h \
 	../../include/Inventor/fields/SoSFULong.h \
 	../../include/Inventor/fields/SoSFUShort.h \
+	../../include/Inventor/fields/SoSFVec2s.h \
 	../../include/Inventor/fields/SoSFVec2f.h \
 	../../include/Inventor/fields/SoSFVec3f.h \
 	../../include/Inventor/fields/SoSFVec3d.h \
@@ -338,6 +340,7 @@
 @HACKING_COMPACT_BUILD_FALSE@	SoSFTrigger.$(OBJEXT) \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFUInt32.$(OBJEXT) \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFUShort.$(OBJEXT) \
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec2s.$(OBJEXT) \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFVec2f.$(OBJEXT) \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFVec3d.$(OBJEXT) \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFVec3f.$(OBJEXT) \
@@ -374,9 +377,10 @@
 @HACKING_COMPACT_BUILD_FALSE@	SoSFShort.lo SoSFString.lo \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFTime.lo SoSFTrigger.lo \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFUInt32.lo SoSFUShort.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSFVec2f.lo SoSFVec3d.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSFVec3f.lo SoSFVec4f.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSField.lo SoGlobalField.lo
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec2s.lo SoSFVec2f.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec3d.lo SoSFVec3f.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec4f.lo SoSField.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoGlobalField.lo
 libfields_la_OBJECTS = $(am_libfields_la_OBJECTS)
 libfields@SUFFIX@LINKHACK_la_LDFLAGS =
 libfields@SUFFIX@LINKHACK_la_LIBADD =
@@ -406,10 +410,10 @@
 @HACKING_COMPACT_BUILD_FALSE@	SoSFRotation.lo SoSFShort.lo \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFString.lo SoSFTime.lo \
 @HACKING_COMPACT_BUILD_FALSE@	SoSFTrigger.lo SoSFUInt32.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSFUShort.lo SoSFVec2f.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSFVec3d.lo SoSFVec3f.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoSFVec4f.lo SoSField.lo \
-@HACKING_COMPACT_BUILD_FALSE@	SoGlobalField.lo
+@HACKING_COMPACT_BUILD_FALSE@	SoSFUShort.lo SoSFVec2s.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec2f.lo SoSFVec3d.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoSFVec3f.lo SoSFVec4f.lo \
+@HACKING_COMPACT_BUILD_FALSE@	SoSField.lo SoGlobalField.lo
 libfields@SUFFIX@LINKHACK_la_OBJECTS = \
 	$(am_libfields@SUFFIX@LINKHACK_la_OBJECTS)
 
@@ -469,7 +473,8 @@
 @AMDEP_TRUE@	$(DEPDIR)/SoSFTrigger.Po $(DEPDIR)/SoSFUInt32.Plo \
 @AMDEP_TRUE@	$(DEPDIR)/SoSFUInt32.Po $(DEPDIR)/SoSFUShort.Plo \
 @AMDEP_TRUE@	$(DEPDIR)/SoSFUShort.Po $(DEPDIR)/SoSFVec2f.Plo \
-@AMDEP_TRUE@	$(DEPDIR)/SoSFVec2f.Po $(DEPDIR)/SoSFVec3d.Plo \
+@AMDEP_TRUE@	$(DEPDIR)/SoSFVec2f.Po $(DEPDIR)/SoSFVec2s.Plo \
+@AMDEP_TRUE@	$(DEPDIR)/SoSFVec2s.Po $(DEPDIR)/SoSFVec3d.Plo \
 @AMDEP_TRUE@	$(DEPDIR)/SoSFVec3d.Po $(DEPDIR)/SoSFVec3f.Plo \
 @AMDEP_TRUE@	$(DEPDIR)/SoSFVec3f.Po $(DEPDIR)/SoSFVec4f.Plo \
 @AMDEP_TRUE@	$(DEPDIR)/SoSFVec4f.Po $(DEPDIR)/SoSField.Plo \
@@ -657,6 +662,8 @@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFUShort.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec2f.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec2f.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec2s.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec2s.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec3d.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec3d.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/SoSFVec3f.Plo@am__quote@
Index: src/fields/SoSFVec2s.cpp
===================================================================
RCS file: src/fields/SoSFVec2s.cpp
diff -N src/fields/SoSFVec2s.cpp
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ src/fields/SoSFVec2s.cpp	25 Jan 2002 09:57:16 -0000
@@ -0,0 +1,119 @@
+/**************************************************************************\
+ *
+ *  This file is part of the Coin 3D visualization library.
+ *  Copyright (C) 1998-2001 by Systems in Motion.  All rights reserved.
+ *  
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU General Public License
+ *  version 2 as published by the Free Software Foundation.  See the
+ *  file LICENSE.GPL at the root directory of this source distribution
+ *  for more details.
+ *
+ *  If you desire to use Coin with software that is incompatible
+ *  licensewise with the GPL, and / or you would like to take
+ *  advantage of the additional benefits with regard to our support
+ *  services, please contact Systems in Motion about acquiring a Coin
+ *  Professional Edition License.  See <URL:http://www.coin3d.org> for
+ *  more information.
+ *
+ *  Systems in Motion, Prof Brochs gate 6, 7030 Trondheim, NORWAY
+ *  <URL:http://www.sim.no>, <mailto:support@sim.no>
+ *
+\**************************************************************************/
+
+/*!
+  \class SoSFVec2s SoSFVec2s.h Inventor/fields/SoSFVec2s.h
+  \brief The SoSFVec2s class is a container for an SbVec2s vector.
+  \ingroup fields
+
+  This field is used where nodes, engines or other field containers
+  needs to store a single vector with two elements.
+
+  \since 2002-01-25
+
+  \sa SoMFVec2s
+*/
+
+#include <Inventor/fields/SoSFVec2s.h>
+#include <Inventor/fields/SoSubFieldP.h>
+#include <Inventor/SoInput.h>
+#include <Inventor/SoOutput.h>
+#include <Inventor/errors/SoReadError.h>
+#if COIN_DEBUG
+#include <Inventor/errors/SoDebugError.h>
+#endif // COIN_DEBUG
+
+
+
+SO_SFIELD_SOURCE(SoSFVec2s, SbVec2s, const SbVec2s &);
+
+
+// Override from parent class.
+void
+SoSFVec2s::initClass(void)
+{
+  SO_SFIELD_INTERNAL_INIT_CLASS(SoSFVec2s);
+}
+
+// No need to document readValue() and writeValue() here, as the
+// necessary information is provided by the documentation of the
+// parent classes.
+#ifndef DOXYGEN_SKIP_THIS
+
+// Read integer value from input stream, return TRUE if
+// successful. Also used from SoMFVec2s class.
+SbBool
+sosfvec2s_read_value(SoInput * in, SbVec2s & v)
+{
+  if (!in->read(v[0]) || !in->read(v[1])) {
+    SoReadError::post(in, "Couldn't read vector");
+    return FALSE;
+  }
+  return TRUE;
+}
+
+SbBool
+SoSFVec2s::readValue(SoInput * in)
+{
+  SbVec2s v;
+  if (!sosfvec2s_read_value(in, v)) return FALSE;
+  this->setValue(v);
+  return TRUE;
+}
+
+// Write integer value to output stream. Also used from SoMFVec2s
+// class.
+void
+sosfvec2s_write_value(SoOutput * out, const SbVec2s & v)
+{
+  out->write(v[0]);
+  if (!out->isBinary()) out->write(' ');
+  out->write(v[1]);
+}
+
+void
+SoSFVec2s::writeValue(SoOutput * out) const
+{
+  sosfvec2s_write_value(out, this->getValue());
+}
+
+#endif // DOXYGEN_SKIP_THIS
+
+
+/*!
+  Set value of vector.
+*/
+void
+SoSFVec2s::setValue(const short x, const short y)
+{
+  this->setValue(SbVec2s(x, y));
+}
+
+/*!
+  Set value of vector.
+*/
+void
+SoSFVec2s::setValue(const short xy[2])
+{
+  this->setValue(SbVec2s(xy));
+}
Index: src/fields/all.cpp
===================================================================
RCS file: /export/cvsroot/Coin/src/fields/all.cpp,v
retrieving revision 1.7
diff -u -r1.7 all.cpp
--- src/fields/all.cpp	20 Nov 2001 14:25:52 -0000	1.7
+++ src/fields/all.cpp	25 Jan 2002 09:57:16 -0000
@@ -68,6 +68,7 @@
 #include "SoSFUInt32.cpp"
 #include "SoSFUShort.cpp"
 #include "SoSFVec2f.cpp"
+#include "SoSFVec2s.cpp"
 #include "SoSFVec3f.cpp"
 #include "SoSFVec4f.cpp"
 #include "SoSField.cpp"
