
srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = ..
CXX = @CXX@
LDFLAGS = @LDFLAGS@

prefix = @prefix@
OBJEXT = @OBJEXT@
EXEEXT = @EXEEXT@

@MAC_FRAMEWORK_FALSE@FRAMEWORKLIBADD =
@MAC_FRAMEWORK_TRUE@FRAMEWORKLIBADD = -lCoin

TS_INCLUDES = -I$(top_srcdir)/include -I$(top_srcdir)/include/Inventor/annex -I$(top_builddir)/include -I$(top_builddir)/include/Inventor/annex -I$(top_srcdir)/testsuite
TS_CPPFLAGS = $(TS_INCLUDES) -g @COIN_TESTSUITE_EXTRA_CPPFLAGS@ @COIN_EXTRA_CPPFLAGS@ @COIN_EXTRA_CXXFLAGS@
TS_LDFLAGS = @COIN_TESTSUITE_EXTRA_LDFLAGS@ -L$(top_builddir)/src -L$(top_builddir)/src/.libs $(LDFLAGS)
TS_LIBS = $(FRAMEWORKLIBADD) @COIN_HACKING_LIBDIRS@ @COIN_EXTRA_LIBS@

EMPTY =

TEST_SUITE_OBJECTS = \
	TestSuiteInit.$(OBJEXT) \
	TestSuiteUtils.$(OBJEXT) \
	TestSuiteMisc.$(OBJEXT) \
	fieldsSoMFBitMask.$(OBJEXT) \
	fieldsSoMFBool.$(OBJEXT) \
	fieldsSoMFColor.$(OBJEXT) \
	fieldsSoMFColorRGBA.$(OBJEXT) \
	fieldsSoMFDouble.$(OBJEXT) \
	fieldsSoMFEngine.$(OBJEXT) \
	fieldsSoMFEnum.$(OBJEXT) \
	fieldsSoSFVec4ub.$(OBJEXT) \
	geoSoGeoCoordinate.$(OBJEXT) \
	geoSoGeoElement.$(OBJEXT) \
	geoSoGeoLocation.$(OBJEXT) \
	geoSoGeoOrigin.$(OBJEXT) \
	geoSoGeoSeparator.$(OBJEXT) \
	nodesSoAnnotation.$(OBJEXT) \
	shadersSoFragmentShader.$(OBJEXT) \
	shadersSoGeometryShader.$(OBJEXT) \
	shadersSoShaderParameter.$(OBJEXT) \
	shadersSoShaderProgram.$(OBJEXT) \
	shadersSoVertexShader.$(OBJEXT) \
	shadowsSoGLShadowCullingElement.$(OBJEXT) \
	shadowsSoShadowCulling.$(OBJEXT) \
	shadowsSoShadowGroup.$(OBJEXT) \
	shadowsSoShadowStyle.$(OBJEXT) \
	shadowsSoShadowStyleElement.$(OBJEXT) \
	$(EMPTY)

TEST_SUITE_BUILT_FILES = \
	fieldsSoMFBitMask.cpp \
	fieldsSoMFBool.cpp \
	fieldsSoMFColor.cpp \
	fieldsSoMFColorRGBA.cpp \
	fieldsSoMFDouble.cpp \
	fieldsSoMFEngine.cpp \
	fieldsSoMFEnum.cpp \
	fieldsSoSFVec4ub.cpp \
	geoSoGeoCoordinate.cpp \
	geoSoGeoElement.cpp \
	geoSoGeoLocation.cpp \
	geoSoGeoOrigin.cpp \
	geoSoGeoSeparator.cpp \
	nodesSoAnnotation.cpp \
	shadersSoFragmentShader.cpp \
	shadersSoGeometryShader.cpp \
	shadersSoShaderParameter.cpp \
	shadersSoShaderProgram.cpp \
	shadersSoVertexShader.cpp \
	shadowsSoGLShadowCullingElement.cpp \
	shadowsSoShadowCulling.cpp \
	shadowsSoShadowGroup.cpp \
	shadowsSoShadowStyle.cpp \
	shadowsSoShadowStyleElement.cpp \
	$(EMPTY)

all: testsuite$(EXEEXT)
	LD_LIBRARY_PATH=$(top_builddir)/src/.libs:$$LD_LIBRARY_PATH \
	DYLD_LIBRARY_PATH=$(top_builddir)/src/.libs:$$DYLD_LIBRARY_PATH \
	PATH=$(top_builddir)/src:$$PATH \
	./testsuite --log_level=warning --show_progress=yes \
	  --detect_memory_leaks=0

verbose: testsuite$(EXEEXT)
	LD_LIBRARY_PATH=$(top_builddir)/src/.libs:$$LD_LIBRARY_PATH \
	DYLD_LIBRARY_PATH=$(top_builddir)/src/.libs:$$DYLD_LIBRARY_PATH \
	PATH=$(top_builddir)/src:$$PATH \
	./testsuite --log_level=all --show_progress=no \
	  --detect_memory_leaks=0

clean:
	rm -f testsuite$(EXEEXT) *.pdb
	rm -f $(TEST_SUITE_OBJECTS)
	rm -f $(TEST_SUITE_BUILT_FILES)

makefile-update:
	( cd $(srcdir); ./makemakefile.sh Makefile.in filter="$(filter)" )
	( cd $(top_builddir); ./config.status testsuite/Makefile )

testsuite$(EXEEXT): $(TEST_SUITE_OBJECTS) Makefile
	$(CXX) -o $@ $(TEST_SUITE_OBJECTS) $(TS_LDFLAGS) $(TS_LIBS)

TestSuiteInit.$(OBJEXT): $(srcdir)/TestSuiteInit.cpp $(srcdir)/TestSuiteUtils.h Makefile
	$(CXX) $(TS_CPPFLAGS) -c $(srcdir)/TestSuiteInit.cpp

TestSuiteUtils.$(OBJEXT): $(srcdir)/TestSuiteUtils.cpp $(srcdir)/TestSuiteUtils.h Makefile
	$(CXX) $(TS_CPPFLAGS) -c $(srcdir)/TestSuiteUtils.cpp

TestSuiteMisc.$(OBJEXT): $(srcdir)/TestSuiteMisc.cpp $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -c $(srcdir)/TestSuiteMisc.cpp

fieldsSoMFBitMask.cpp: $(top_srcdir)/src/fields/SoMFBitMask.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFBitMask.cpp

fieldsSoMFBitMask.$(OBJEXT): fieldsSoMFBitMask.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFBitMask.cpp

fieldsSoMFBool.cpp: $(top_srcdir)/src/fields/SoMFBool.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFBool.cpp

fieldsSoMFBool.$(OBJEXT): fieldsSoMFBool.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFBool.cpp

fieldsSoMFColor.cpp: $(top_srcdir)/src/fields/SoMFColor.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFColor.cpp

fieldsSoMFColor.$(OBJEXT): fieldsSoMFColor.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFColor.cpp

fieldsSoMFColorRGBA.cpp: $(top_srcdir)/src/fields/SoMFColorRGBA.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFColorRGBA.cpp

fieldsSoMFColorRGBA.$(OBJEXT): fieldsSoMFColorRGBA.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFColorRGBA.cpp

fieldsSoMFDouble.cpp: $(top_srcdir)/src/fields/SoMFDouble.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFDouble.cpp

fieldsSoMFDouble.$(OBJEXT): fieldsSoMFDouble.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFDouble.cpp

fieldsSoMFEngine.cpp: $(top_srcdir)/src/fields/SoMFEngine.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFEngine.cpp

fieldsSoMFEngine.$(OBJEXT): fieldsSoMFEngine.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFEngine.cpp

fieldsSoMFEnum.cpp: $(top_srcdir)/src/fields/SoMFEnum.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoMFEnum.cpp

fieldsSoMFEnum.$(OBJEXT): fieldsSoMFEnum.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoMFEnum.cpp

fieldsSoSFVec4ub.cpp: $(top_srcdir)/src/fields/SoSFVec4ub.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/fields/SoSFVec4ub.cpp

fieldsSoSFVec4ub.$(OBJEXT): fieldsSoSFVec4ub.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c fieldsSoSFVec4ub.cpp

geoSoGeoCoordinate.cpp: $(top_srcdir)/src/geo/SoGeoCoordinate.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/geo/SoGeoCoordinate.cpp

geoSoGeoCoordinate.$(OBJEXT): geoSoGeoCoordinate.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c geoSoGeoCoordinate.cpp

geoSoGeoElement.cpp: $(top_srcdir)/src/geo/SoGeoElement.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/geo/SoGeoElement.cpp

geoSoGeoElement.$(OBJEXT): geoSoGeoElement.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c geoSoGeoElement.cpp

geoSoGeoLocation.cpp: $(top_srcdir)/src/geo/SoGeoLocation.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/geo/SoGeoLocation.cpp

geoSoGeoLocation.$(OBJEXT): geoSoGeoLocation.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c geoSoGeoLocation.cpp

geoSoGeoOrigin.cpp: $(top_srcdir)/src/geo/SoGeoOrigin.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/geo/SoGeoOrigin.cpp

geoSoGeoOrigin.$(OBJEXT): geoSoGeoOrigin.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c geoSoGeoOrigin.cpp

geoSoGeoSeparator.cpp: $(top_srcdir)/src/geo/SoGeoSeparator.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/geo/SoGeoSeparator.cpp

geoSoGeoSeparator.$(OBJEXT): geoSoGeoSeparator.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c geoSoGeoSeparator.cpp

nodesSoAnnotation.cpp: $(top_srcdir)/src/nodes/SoAnnotation.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/nodes/SoAnnotation.cpp

nodesSoAnnotation.$(OBJEXT): nodesSoAnnotation.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c nodesSoAnnotation.cpp

shadersSoFragmentShader.cpp: $(top_srcdir)/src/shaders/SoFragmentShader.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shaders/SoFragmentShader.cpp

shadersSoFragmentShader.$(OBJEXT): shadersSoFragmentShader.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadersSoFragmentShader.cpp

shadersSoGeometryShader.cpp: $(top_srcdir)/src/shaders/SoGeometryShader.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shaders/SoGeometryShader.cpp

shadersSoGeometryShader.$(OBJEXT): shadersSoGeometryShader.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadersSoGeometryShader.cpp

shadersSoShaderParameter.cpp: $(top_srcdir)/src/shaders/SoShaderParameter.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shaders/SoShaderParameter.cpp

shadersSoShaderParameter.$(OBJEXT): shadersSoShaderParameter.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadersSoShaderParameter.cpp

shadersSoShaderProgram.cpp: $(top_srcdir)/src/shaders/SoShaderProgram.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shaders/SoShaderProgram.cpp

shadersSoShaderProgram.$(OBJEXT): shadersSoShaderProgram.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadersSoShaderProgram.cpp

shadersSoVertexShader.cpp: $(top_srcdir)/src/shaders/SoVertexShader.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shaders/SoVertexShader.cpp

shadersSoVertexShader.$(OBJEXT): shadersSoVertexShader.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadersSoVertexShader.cpp

shadowsSoGLShadowCullingElement.cpp: $(top_srcdir)/src/shadows/SoGLShadowCullingElement.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shadows/SoGLShadowCullingElement.cpp

shadowsSoGLShadowCullingElement.$(OBJEXT): shadowsSoGLShadowCullingElement.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadowsSoGLShadowCullingElement.cpp

shadowsSoShadowCulling.cpp: $(top_srcdir)/src/shadows/SoShadowCulling.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shadows/SoShadowCulling.cpp

shadowsSoShadowCulling.$(OBJEXT): shadowsSoShadowCulling.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadowsSoShadowCulling.cpp

shadowsSoShadowGroup.cpp: $(top_srcdir)/src/shadows/SoShadowGroup.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shadows/SoShadowGroup.cpp

shadowsSoShadowGroup.$(OBJEXT): shadowsSoShadowGroup.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadowsSoShadowGroup.cpp

shadowsSoShadowStyle.cpp: $(top_srcdir)/src/shadows/SoShadowStyle.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shadows/SoShadowStyle.cpp

shadowsSoShadowStyle.$(OBJEXT): shadowsSoShadowStyle.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadowsSoShadowStyle.cpp

shadowsSoShadowStyleElement.cpp: $(top_srcdir)/src/shadows/SoShadowStyleElement.cpp $(srcdir)/makeextract.sh
	$(srcdir)/makeextract.sh $(top_srcdir) src/shadows/SoShadowStyleElement.cpp

shadowsSoShadowStyleElement.$(OBJEXT): shadowsSoShadowStyleElement.cpp $(srcdir)/TestSuiteUtils.h $(srcdir)/TestSuiteMisc.h Makefile
	$(CXX) $(TS_CPPFLAGS) -g -c shadowsSoShadowStyleElement.cpp

